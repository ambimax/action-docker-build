"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("path")),r=require("fs"),n=e(r),o=e(require("module")),i=e(require("os")),s=e(require("events")),a=e(require("child_process")),u=e(require("util")),l=e(require("assert")),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),p=function(e){if(0<=e&&e<c.length)return c[e];throw new TypeError("Must be between 0 and 63: "+e)},d=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1};var h=function(e){var t,r="",n=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&n,(n>>>=5)>0&&(t|=32),r+=p(t)}while(n>0);return r},f=function(e,t,r){var n,o,i,s,a=e.length,u=0,l=0;do{if(t>=a)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=d(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));n=!!(32&o),u+=(o&=31)<<l,l+=5}while(n);r.value=(s=(i=u)>>1,1==(1&i)?-s:s),r.rest=t},g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function v(e,t){return e(t={exports:{}},t.exports),t.exports}var y=v((function(e,t){t.getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')};var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function o(e){var t=e.match(r);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var r=e,n=o(e);if(n){if(!n.path)return e;r=n.path}for(var s,a=t.isAbsolute(r),u=r.split(/\/+/),l=0,c=u.length-1;c>=0;c--)"."===(s=u[c])?u.splice(c,1):".."===s?l++:l>0&&(""===s?(u.splice(c+1,l),l=0):(u.splice(c,2),l--));return""===(r=u.join("/"))&&(r=a?"/":"."),n?(n.path=r,i(n)):r}function a(e,t){""===e&&(e="."),""===t&&(t=".");var r=o(t),a=o(e);if(a&&(e=a.path||"/"),r&&!r.scheme)return a&&(r.scheme=a.scheme),i(r);if(r||t.match(n))return t;if(a&&!a.host&&!a.path)return a.host=t,i(a);var u="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=u,i(a)):u}t.urlParse=o,t.urlGenerate=i,t.normalize=s,t.join=a,t.isAbsolute=function(e){return"/"===e.charAt(0)||r.test(e)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)};var u=!("__proto__"in Object.create(null));function l(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function p(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}t.toSetString=u?l:function(e){return c(e)?"$"+e:e},t.fromSetString=u?l:function(e){return c(e)?e.slice(1):e},t.compareByOriginalPositions=function(e,t,r){var n=p(e.source,t.source);return 0!==n||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)||r||0!==(n=e.generatedColumn-t.generatedColumn)||0!==(n=e.generatedLine-t.generatedLine)?n:p(e.name,t.name)},t.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n||0!==(n=e.generatedColumn-t.generatedColumn)||r||0!==(n=p(e.source,t.source))||0!==(n=e.originalLine-t.originalLine)||0!==(n=e.originalColumn-t.originalColumn)?n:p(e.name,t.name)},t.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r||0!==(r=e.generatedColumn-t.generatedColumn)||0!==(r=p(e.source,t.source))||0!==(r=e.originalLine-t.originalLine)||0!==(r=e.originalColumn-t.originalColumn)?r:p(e.name,t.name)},t.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},t.computeSourceURL=function(e,t,r){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),r){var n=o(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var u=n.path.lastIndexOf("/");u>=0&&(n.path=n.path.substring(0,u+1))}t=a(i(n),t)}return s(t)}})),_=(y.getArg,y.urlParse,y.urlGenerate,y.normalize,y.join,y.isAbsolute,y.relative,y.toSetString,y.fromSetString,y.compareByOriginalPositions,y.compareByGeneratedPositionsDeflated,y.compareByGeneratedPositionsInflated,y.parseSourceMapInput,y.computeSourceURL,Object.prototype.hasOwnProperty),w="undefined"!=typeof Map;function S(){this._array=[],this._set=w?new Map:Object.create(null)}S.fromArray=function(e,t){for(var r=new S,n=0,o=e.length;n<o;n++)r.add(e[n],t);return r},S.prototype.size=function(){return w?this._set.size:Object.getOwnPropertyNames(this._set).length},S.prototype.add=function(e,t){var r=w?e:y.toSetString(e),n=w?this.has(e):_.call(this._set,r),o=this._array.length;n&&!t||this._array.push(e),n||(w?this._set.set(e,o):this._set[r]=o)},S.prototype.has=function(e){if(w)return this._set.has(e);var t=y.toSetString(e);return _.call(this._set,t)},S.prototype.indexOf=function(e){if(w){var t=this._set.get(e);if(t>=0)return t}else{var r=y.toSetString(e);if(_.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},S.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},S.prototype.toArray=function(){return this._array.slice()};var C={ArraySet:S};function E(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}E.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},E.prototype.add=function(e){var t,r,n,o,i,s;t=this._last,r=e,n=t.generatedLine,o=r.generatedLine,i=t.generatedColumn,s=r.generatedColumn,o>n||o==n&&s>=i||y.compareByGeneratedPositionsInflated(t,r)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},E.prototype.toArray=function(){return this._sorted||(this._array.sort(y.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};var b=C.ArraySet,A={MappingList:E}.MappingList;function O(e){e||(e={}),this._file=y.getArg(e,"file",null),this._sourceRoot=y.getArg(e,"sourceRoot",null),this._skipValidation=y.getArg(e,"skipValidation",!1),this._sources=new b,this._names=new b,this._mappings=new A,this._sourcesContents=null}O.prototype._version=3,O.fromSourceMap=function(e){var t=e.sourceRoot,r=new O({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var n={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(n.source=e.source,null!=t&&(n.source=y.relative(t,n.source)),n.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(n.name=e.name)),r.addMapping(n)})),e.sources.forEach((function(n){var o=n;null!==t&&(o=y.relative(t,n)),r._sources.has(o)||r._sources.add(o);var i=e.sourceContentFor(n);null!=i&&r.setSourceContent(n,i)})),r},O.prototype.addMapping=function(e){var t=y.getArg(e,"generated"),r=y.getArg(e,"original",null),n=y.getArg(e,"source",null),o=y.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,o),null!=n&&(n=String(n),this._sources.has(n)||this._sources.add(n)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:o})},O.prototype.setSourceContent=function(e,t){var r=e;null!=this._sourceRoot&&(r=y.relative(this._sourceRoot,r)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[y.toSetString(r)]=t):this._sourcesContents&&(delete this._sourcesContents[y.toSetString(r)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},O.prototype.applySourceMap=function(e,t,r){var n=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');n=e.file}var o=this._sourceRoot;null!=o&&(n=y.relative(o,n));var i=new b,s=new b;this._mappings.unsortedForEach((function(t){if(t.source===n&&null!=t.originalLine){var a=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=a.source&&(t.source=a.source,null!=r&&(t.source=y.join(r,t.source)),null!=o&&(t.source=y.relative(o,t.source)),t.originalLine=a.line,t.originalColumn=a.column,null!=a.name&&(t.name=a.name))}var u=t.source;null==u||i.has(u)||i.add(u);var l=t.name;null==l||s.has(l)||s.add(l)}),this),this._sources=i,this._names=s,e.sources.forEach((function(t){var n=e.sourceContentFor(t);null!=n&&(null!=r&&(t=y.join(r,t)),null!=o&&(t=y.relative(o,t)),this.setSourceContent(t,n))}),this)},O.prototype._validateMapping=function(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},O.prototype._serializeMappings=function(){for(var e,t,r,n,o=0,i=1,s=0,a=0,u=0,l=0,c="",p=this._mappings.toArray(),d=0,f=p.length;d<f;d++){if(e="",(t=p[d]).generatedLine!==i)for(o=0;t.generatedLine!==i;)e+=";",i++;else if(d>0){if(!y.compareByGeneratedPositionsInflated(t,p[d-1]))continue;e+=","}e+=h(t.generatedColumn-o),o=t.generatedColumn,null!=t.source&&(n=this._sources.indexOf(t.source),e+=h(n-l),l=n,e+=h(t.originalLine-1-a),a=t.originalLine-1,e+=h(t.originalColumn-s),s=t.originalColumn,null!=t.name&&(r=this._names.indexOf(t.name),e+=h(r-u),u=r)),c+=e}return c},O.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=y.relative(t,e));var r=y.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null}),this)},O.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},O.prototype.toString=function(){return JSON.stringify(this.toJSON())};var x={SourceMapGenerator:O},L=v((function(e,t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,r,n,o){if(0===r.length)return-1;var i=function e(r,n,o,i,s,a){var u=Math.floor((n-r)/2)+r,l=s(o,i[u],!0);return 0===l?u:l>0?n-u>1?e(u,n,o,i,s,a):a==t.LEAST_UPPER_BOUND?n<i.length?n:-1:u:u-r>1?e(r,u,o,i,s,a):a==t.LEAST_UPPER_BOUND?u:r<0?-1:r}(-1,r.length,e,r,n,o||t.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&0===n(r[i],r[i-1],!0);)--i;return i}}));L.GREATEST_LOWER_BOUND,L.LEAST_UPPER_BOUND,L.search;function P(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function M(e,t,r,n){if(r<n){var o=r-1;P(e,(u=r,l=n,Math.round(u+Math.random()*(l-u))),n);for(var i=e[n],s=r;s<n;s++)t(e[s],i)<=0&&P(e,o+=1,s);P(e,o+1,s);var a=o+1;M(e,t,r,a-1),M(e,t,a+1,n)}var u,l}var R=C.ArraySet,N=function(e,t){M(e,t,0,e.length-1)};function T(e,t){var r=e;return"string"==typeof e&&(r=y.parseSourceMapInput(e)),null!=r.sections?new F(r,t):new $(r,t)}T.fromSourceMap=function(e,t){return $.fromSourceMap(e,t)},T.prototype._version=3,T.prototype.__generatedMappings=null,Object.defineProperty(T.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),T.prototype.__originalMappings=null,Object.defineProperty(T.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),T.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return";"===r||","===r},T.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},T.GENERATED_ORDER=1,T.ORIGINAL_ORDER=2,T.GREATEST_LOWER_BOUND=1,T.LEAST_UPPER_BOUND=2,T.prototype.eachMapping=function(e,t,r){var n,o=t||null;switch(r||T.GENERATED_ORDER){case T.GENERATED_ORDER:n=this._generatedMappings;break;case T.ORIGINAL_ORDER:n=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var i=this.sourceRoot;n.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:t=y.computeSourceURL(i,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,o)},T.prototype.allGeneratedPositionsFor=function(e){var t=y.getArg(e,"line"),r={source:y.getArg(e,"source"),originalLine:t,originalColumn:y.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var n=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,L.LEAST_UPPER_BOUND);if(o>=0){var i=this._originalMappings[o];if(void 0===e.column)for(var s=i.originalLine;i&&i.originalLine===s;)n.push({line:y.getArg(i,"generatedLine",null),column:y.getArg(i,"generatedColumn",null),lastColumn:y.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o];else for(var a=i.originalColumn;i&&i.originalLine===t&&i.originalColumn==a;)n.push({line:y.getArg(i,"generatedLine",null),column:y.getArg(i,"generatedColumn",null),lastColumn:y.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++o]}return n};var k=T;function $(e,t){var r=e;"string"==typeof e&&(r=y.parseSourceMapInput(e));var n=y.getArg(r,"version"),o=y.getArg(r,"sources"),i=y.getArg(r,"names",[]),s=y.getArg(r,"sourceRoot",null),a=y.getArg(r,"sourcesContent",null),u=y.getArg(r,"mappings"),l=y.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=y.normalize(s)),o=o.map(String).map(y.normalize).map((function(e){return s&&y.isAbsolute(s)&&y.isAbsolute(e)?y.relative(s,e):e})),this._names=R.fromArray(i.map(String),!0),this._sources=R.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map((function(e){return y.computeSourceURL(s,e,t)})),this.sourceRoot=s,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=t,this.file=l}function I(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}$.prototype=Object.create(T.prototype),$.prototype.consumer=T,$.prototype._findSourceIndex=function(e){var t,r=e;if(null!=this.sourceRoot&&(r=y.relative(this.sourceRoot,r)),this._sources.has(r))return this._sources.indexOf(r);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},$.fromSourceMap=function(e,t){var r=Object.create($.prototype),n=r._names=R.fromArray(e._names.toArray(),!0),o=r._sources=R.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=t,r._absoluteSources=r._sources.toArray().map((function(e){return y.computeSourceURL(r.sourceRoot,e,t)}));for(var i=e._mappings.toArray().slice(),s=r.__generatedMappings=[],a=r.__originalMappings=[],u=0,l=i.length;u<l;u++){var c=i[u],p=new I;p.generatedLine=c.generatedLine,p.generatedColumn=c.generatedColumn,c.source&&(p.source=o.indexOf(c.source),p.originalLine=c.originalLine,p.originalColumn=c.originalColumn,c.name&&(p.name=n.indexOf(c.name)),a.push(p)),s.push(p)}return N(r.__originalMappings,y.compareByOriginalPositions),r},$.prototype._version=3,Object.defineProperty($.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),$.prototype._parseMappings=function(e,t){for(var r,n,o,i,s,a=1,u=0,l=0,c=0,p=0,d=0,h=e.length,g=0,m={},v={},_=[],w=[];g<h;)if(";"===e.charAt(g))a++,g++,u=0;else if(","===e.charAt(g))g++;else{for((r=new I).generatedLine=a,i=g;i<h&&!this._charIsMappingSeparator(e,i);i++);if(o=m[n=e.slice(g,i)])g+=n.length;else{for(o=[];g<i;)f(e,g,v),s=v.value,g=v.rest,o.push(s);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");m[n]=o}r.generatedColumn=u+o[0],u=r.generatedColumn,o.length>1&&(r.source=p+o[1],p+=o[1],r.originalLine=l+o[2],l=r.originalLine,r.originalLine+=1,r.originalColumn=c+o[3],c=r.originalColumn,o.length>4&&(r.name=d+o[4],d+=o[4])),w.push(r),"number"==typeof r.originalLine&&_.push(r)}N(w,y.compareByGeneratedPositionsDeflated),this.__generatedMappings=w,N(_,y.compareByOriginalPositions),this.__originalMappings=_},$.prototype._findMapping=function(e,t,r,n,o,i){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return L.search(e,t,o,i)},$.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},$.prototype.originalPositionFor=function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},r=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",y.compareByGeneratedPositionsDeflated,y.getArg(e,"bias",T.GREATEST_LOWER_BOUND));if(r>=0){var n=this._generatedMappings[r];if(n.generatedLine===t.generatedLine){var o=y.getArg(n,"source",null);null!==o&&(o=this._sources.at(o),o=y.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var i=y.getArg(n,"name",null);return null!==i&&(i=this._names.at(i)),{source:o,line:y.getArg(n,"originalLine",null),column:y.getArg(n,"originalColumn",null),name:i}}}return{source:null,line:null,column:null,name:null}},$.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e})))},$.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var n,o=e;if(null!=this.sourceRoot&&(o=y.relative(this.sourceRoot,o)),null!=this.sourceRoot&&(n=y.urlParse(this.sourceRoot))){var i=o.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!n.path||"/"==n.path)&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(t)return null;throw new Error('"'+o+'" is not in the SourceMap.')},$.prototype.generatedPositionFor=function(e){var t=y.getArg(e,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};var r={source:t,originalLine:y.getArg(e,"line"),originalColumn:y.getArg(e,"column")},n=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",y.compareByOriginalPositions,y.getArg(e,"bias",T.GREATEST_LOWER_BOUND));if(n>=0){var o=this._originalMappings[n];if(o.source===r.source)return{line:y.getArg(o,"generatedLine",null),column:y.getArg(o,"generatedColumn",null),lastColumn:y.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};var D=$;function F(e,t){var r=e;"string"==typeof e&&(r=y.parseSourceMapInput(e));var n=y.getArg(r,"version"),o=y.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new R,this._names=new R;var i={line:-1,column:0};this._sections=o.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var r=y.getArg(e,"offset"),n=y.getArg(r,"line"),o=y.getArg(r,"column");if(n<i.line||n===i.line&&o<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=r,{generatedOffset:{generatedLine:n+1,generatedColumn:o+1},consumer:new T(y.getArg(e,"map"),t)}}))}F.prototype=Object.create(T.prototype),F.prototype.constructor=T,F.prototype._version=3,Object.defineProperty(F.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),F.prototype.originalPositionFor=function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},r=L.search(t,this._sections,(function(e,t){var r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn})),n=this._sections[r];return n?n.consumer.originalPositionFor({line:t.generatedLine-(n.generatedOffset.generatedLine-1),column:t.generatedColumn-(n.generatedOffset.generatedLine===t.generatedLine?n.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},F.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},F.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},F.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(-1!==r.consumer._findSourceIndex(y.getArg(e,"source"))){var n=r.consumer.generatedPositionFor(e);if(n)return{line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},F.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var n=this._sections[r],o=n.consumer._generatedMappings,i=0;i<o.length;i++){var s=o[i],a=n.consumer._sources.at(s.source);a=y.computeSourceURL(n.consumer.sourceRoot,a,this._sourceMapURL),this._sources.add(a),a=this._sources.indexOf(a);var u=null;s.name&&(u=n.consumer._names.at(s.name),this._names.add(u),u=this._names.indexOf(u));var l={source:a,generatedLine:s.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:s.generatedColumn+(n.generatedOffset.generatedLine===s.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:s.originalLine,originalColumn:s.originalColumn,name:u};this.__generatedMappings.push(l),"number"==typeof l.originalLine&&this.__originalMappings.push(l)}N(this.__generatedMappings,y.compareByGeneratedPositionsDeflated),N(this.__originalMappings,y.compareByOriginalPositions)};var U={SourceMapConsumer:k,BasicSourceMapConsumer:D,IndexedSourceMapConsumer:F},B=x.SourceMapGenerator,G=/(\r?\n)/,j="$$$isSourceNode$$$";function W(e,t,r,n,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==o?null:o,this[j]=!0,null!=n&&this.add(n)}W.fromStringWithSourceMap=function(e,t,r){var n=new W,o=e.split(G),i=0,s=function(){return e()+(e()||"");function e(){return i<o.length?o[i++]:void 0}},a=1,u=0,l=null;return t.eachMapping((function(e){if(null!==l){if(!(a<e.generatedLine)){var t=(r=o[i]||"").substr(0,e.generatedColumn-u);return o[i]=r.substr(e.generatedColumn-u),u=e.generatedColumn,c(l,t),void(l=e)}c(l,s()),a++,u=0}for(;a<e.generatedLine;)n.add(s()),a++;if(u<e.generatedColumn){var r=o[i]||"";n.add(r.substr(0,e.generatedColumn)),o[i]=r.substr(e.generatedColumn),u=e.generatedColumn}l=e}),this),i<o.length&&(l&&c(l,s()),n.add(o.splice(i).join(""))),t.sources.forEach((function(e){var o=t.sourceContentFor(e);null!=o&&(null!=r&&(e=y.join(r,e)),n.setSourceContent(e,o))})),n;function c(e,t){if(null===e||void 0===e.source)n.add(t);else{var o=r?y.join(r,e.source):e.source;n.add(new W(e.originalLine,e.originalColumn,o,t,e.name))}}},W.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[j]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},W.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[j]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},W.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[j]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},W.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},W.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[j]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},W.prototype.setSourceContent=function(e,t){this.sourceContents[y.toSetString(e)]=t},W.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][j]&&this.children[t].walkSourceContents(e);var n=Object.keys(this.sourceContents);for(t=0,r=n.length;t<r;t++)e(y.fromSetString(n[t]),this.sourceContents[n[t]])},W.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},W.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},r=new B(e),n=!1,o=null,i=null,s=null,a=null;return this.walk((function(e,u){t.code+=e,null!==u.source&&null!==u.line&&null!==u.column?(o===u.source&&i===u.line&&s===u.column&&a===u.name||r.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:t.line,column:t.column},name:u.name}),o=u.source,i=u.line,s=u.column,a=u.name,n=!0):n&&(r.addMapping({generated:{line:t.line,column:t.column}}),o=null,n=!1);for(var l=0,c=e.length;l<c;l++)10===e.charCodeAt(l)?(t.line++,t.column=0,l+1===c?(o=null,n=!1):n&&r.addMapping({source:u.source,original:{line:u.line,column:u.column},generated:{line:t.line,column:t.column},name:u.name})):t.column++})),this.walkSourceContents((function(e,t){r.setSourceContent(e,t)})),{code:t.code,map:r}};var q={SourceMapGenerator:x.SourceMapGenerator,SourceMapConsumer:U.SourceMapConsumer,SourceNode:{SourceNode:W}.SourceNode},H=Object.prototype.toString,V="function"==typeof Buffer.alloc&&"function"==typeof Buffer.allocUnsafe&&"function"==typeof Buffer.from;var z,Q=function(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return n=e,"ArrayBuffer"===H.call(n).slice(8,-1)?function(e,t,r){t>>>=0;var n=e.byteLength-t;if(n<0)throw new RangeError("'offset' is out of bounds");if(void 0===r)r=n;else if((r>>>=0)>n)throw new RangeError("'length' is out of bounds");return V?Buffer.from(e.slice(t,t+r)):new Buffer(new Uint8Array(e.slice(t,t+r)))}(e,t,r):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return V?Buffer.from(e,t):new Buffer(e,t)}(e,t):V?Buffer.from(e):new Buffer(e);var n},X=q.SourceMapConsumer,J=t;try{(z=n).existsSync&&z.readFileSync||(z=null)}catch(e){}var Z=!1,K=!1,Y=!1,ee="auto",te={},re={},ne=/^data:application\/json[^,]+base64,/,oe=[],ie=[];function se(){return"browser"===ee||"node"!==ee&&("undefined"!=typeof window&&"function"==typeof XMLHttpRequest&&!(window.require&&window.module&&window.process&&"renderer"===window.process.type))}function ae(e){return function(t){for(var r=0;r<e.length;r++){var n=e[r](t);if(n)return n}return null}}var ue=ae(oe);function le(e,t){if(!e)return t;var r=J.dirname(e),n=/^\w+:\/\/[^\/]*/.exec(r),o=n?n[0]:"",i=r.slice(o.length);return o&&/^\/\w\:/.test(i)?(o+="/")+J.resolve(r.slice(o.length),t).replace(/\\/g,"/"):o+J.resolve(r.slice(o.length),t)}oe.push((function(e){if(e=e.trim(),/^file:/.test(e)&&(e=e.replace(/file:\/\/\/(\w:)?/,(function(e,t){return t?"":"/"}))),e in te)return te[e];var t="";try{if(z)z.existsSync(e)&&(t=z.readFileSync(e,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",e,!1),r.send(null),4===r.readyState&&200===r.status&&(t=r.responseText)}}catch(e){}return te[e]=t}));var ce=ae(ie);function pe(e){var t=re[e.source];if(!t){var r=ce(e.source);r?(t=re[e.source]={url:r.url,map:new X(r.map)}).map.sourcesContent&&t.map.sources.forEach((function(e,r){var n=t.map.sourcesContent[r];if(n){var o=le(t.url,e);te[o]=n}})):t=re[e.source]={url:null,map:null}}if(t&&t.map&&"function"==typeof t.map.originalPositionFor){var n=t.map.originalPositionFor(e);if(null!==n.source)return n.source=le(t.url,n.source),n}return e}function de(){var e,t="";if(this.isNative())t="native";else{!(e=this.getScriptNameOrSourceURL())&&this.isEval()&&(t=this.getEvalOrigin(),t+=", "),t+=e||"<anonymous>";var r=this.getLineNumber();if(null!=r){t+=":"+r;var n=this.getColumnNumber();n&&(t+=":"+n)}}var o="",i=this.getFunctionName(),s=!0,a=this.isConstructor();if(!(this.isToplevel()||a)){var u=this.getTypeName();"[object Object]"===u&&(u="null");var l=this.getMethodName();i?(u&&0!=i.indexOf(u)&&(o+=u+"."),o+=i,l&&i.indexOf("."+l)!=i.length-l.length-1&&(o+=" [as "+l+"]")):o+=u+"."+(l||"<anonymous>")}else a?o+="new "+(i||"<anonymous>"):i?o+=i:(o+=t,s=!1);return s&&(o+=" ("+t+")"),o}function he(e){var t={};return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(r){t[r]=/^(?:is|get)/.test(r)?function(){return e[r].call(e)}:e[r]})),t.toString=de,t}function fe(e,t){if(void 0===t&&(t={nextPosition:null,curPosition:null}),e.isNative())return t.curPosition=null,e;var r=e.getFileName()||e.getScriptNameOrSourceURL();if(r){var n=e.getLineNumber(),o=e.getColumnNumber()-1,i=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/.test(process.version)?0:62;1===n&&o>i&&!se()&&!e.isEval()&&(o-=i);var s=pe({source:r,line:n,column:o});t.curPosition=s;var a=(e=he(e)).getFunctionName;return e.getFunctionName=function(){return null==t.nextPosition?a():t.nextPosition.name||a()},e.getFileName=function(){return s.source},e.getLineNumber=function(){return s.line},e.getColumnNumber=function(){return s.column+1},e.getScriptNameOrSourceURL=function(){return s.source},e}var u=e.isEval()&&e.getEvalOrigin();return u?(u=function e(t){var r=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(r){var n=pe({source:r[2],line:+r[3],column:r[4]-1});return"eval at "+r[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return(r=/^eval at ([^(]+) \((.+)\)$/.exec(t))?"eval at "+r[1]+" ("+e(r[2])+")":t}(u),(e=he(e)).getEvalOrigin=function(){return u},e):e}function ge(e,t){Y&&(te={},re={});for(var r=(e.name||"Error")+": "+(e.message||""),n={nextPosition:null,curPosition:null},o=[],i=t.length-1;i>=0;i--)o.push("\n    at "+fe(t[i],n)),n.nextPosition=n.curPosition;return n.curPosition=n.nextPosition=null,r+o.reverse().join("")}function me(e){var t=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(e.stack);if(t){var r=t[1],n=+t[2],o=+t[3],i=te[r];if(!i&&z&&z.existsSync(r))try{i=z.readFileSync(r,"utf8")}catch(e){i=""}if(i){var s=i.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return r+":"+n+"\n"+s+"\n"+new Array(o).join(" ")+"^"}}return null}function ve(e){var t=me(e);process.stderr._handle&&process.stderr._handle.setBlocking&&process.stderr._handle.setBlocking(!0),t&&(console.error(),console.error(t)),console.error(e.stack),process.exit(1)}ie.push((function(e){var t,r=function(e){var t;if(se())try{var r=new XMLHttpRequest;r.open("GET",e,!1),r.send(null),t=4===r.readyState?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch(e){}t=ue(e);for(var o,i,s=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/gm;i=s.exec(t);)o=i;return o?o[1]:null}(e);if(!r)return null;if(ne.test(r)){var n=r.slice(r.indexOf(",")+1);t=Q(n,"base64").toString(),r=e}else r=le(e,r),t=ue(r);return t?{url:r,map:t}:null}));oe.slice(0),ie.slice(0);(function(e){if((e=e||{}).environment&&(ee=e.environment,-1===["node","browser","auto"].indexOf(ee)))throw new Error("environment "+ee+" was unknown. Available options are {auto, browser, node}");if(e.retrieveFile&&(e.overrideRetrieveFile&&(oe.length=0),oe.unshift(e.retrieveFile)),e.retrieveSourceMap&&(e.overrideRetrieveSourceMap&&(ie.length=0),ie.unshift(e.retrieveSourceMap)),e.hookRequire&&!se()){var t;try{t=o}catch(e){}var r=t.prototype._compile;r.__sourceMapSupport||(t.prototype._compile=function(e,t){return te[t]=e,re[t]=void 0,r.call(this,e,t)},t.prototype._compile.__sourceMapSupport=!0)}var n;(Y||(Y="emptyCacheBetweenOperations"in e&&e.emptyCacheBetweenOperations),Z||(Z=!0,Error.prepareStackTrace=ge),K)||(!("handleUncaughtExceptions"in e)||e.handleUncaughtExceptions)&&"object"==typeof process&&null!==process&&"function"==typeof process.on&&(K=!0,n=process.emit,process.emit=function(e){if("uncaughtException"===e){var t=arguments[1]&&arguments[1].stack,r=this.listeners(e).length>0;if(t&&!r)return ve(arguments[1])}return n.apply(this,arguments)})})();var ye=v((function(e,t){var r=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i);function o(e,t,r){const o=new s(e,t,r);process.stdout.write(o.toString()+n.EOL)}t.issueCommand=o,t.issue=function(e,t=""){o(e,{},t)};class s{constructor(e,t,r){e||(e="missing.command"),this.command=e,this.properties=t,this.message=r}toString(){let e="::"+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let r=!0;for(const n in this.properties)if(this.properties.hasOwnProperty(n)){const o=this.properties[n];o&&(r?r=!1:e+=",",e+=`${n}=${t=o,(t||"").replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}`)}}var t;return e+=`::${function(e){return(e||"").replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}(this.message)}`,e}}}));m(ye);ye.issueCommand,ye.issue;var _e=v((function(e,r){var n=g&&g.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},o=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(r,"__esModule",{value:!0});const s=o(i),a=o(t);var u;function l(e){ye.issue("error",e)}function c(e){ye.issue("group",e)}function p(){ye.issue("endgroup")}!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(u=r.ExitCode||(r.ExitCode={})),r.exportVariable=function(e,t){process.env[e]=t,ye.issueCommand("set-env",{name:e},t)},r.setSecret=function(e){ye.issueCommand("add-mask",{},e)},r.addPath=function(e){ye.issueCommand("add-path",{},e),process.env.PATH=`${e}${a.delimiter}${process.env.PATH}`},r.getInput=function(e,t){const r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return r.trim()},r.setOutput=function(e,t){ye.issueCommand("set-output",{name:e},t)},r.setFailed=function(e){process.exitCode=u.Failure,l(e)},r.isDebug=function(){return"1"===process.env.RUNNER_DEBUG},r.debug=function(e){ye.issueCommand("debug",{},e)},r.error=l,r.warning=function(e){ye.issue("warning",e)},r.info=function(e){process.stdout.write(e+s.EOL)},r.startGroup=c,r.endGroup=p,r.group=function(e,t){return n(this,void 0,void 0,(function*(){let r;c(e);try{r=yield t()}finally{p()}return r}))},r.saveState=function(e,t){ye.issueCommand("save-state",{name:e},t)},r.getState=function(e){return process.env[`STATE_${e}`]||""}})),we=m(_e),Se=(_e.ExitCode,_e.exportVariable,_e.setSecret,_e.addPath,_e.getInput,_e.setOutput,_e.setFailed,_e.isDebug,_e.debug,_e.error,_e.warning,_e.info,_e.startGroup,_e.endGroup,_e.group,_e.saveState,_e.getState,v((function(e,r){var o,i=g&&g.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};function s(e){return(1&e.mode)>0||(8&e.mode)>0&&e.gid===process.getgid()||(64&e.mode)>0&&e.uid===process.getuid()}Object.defineProperty(r,"__esModule",{value:!0}),o=n.promises,r.chmod=o.chmod,r.copyFile=o.copyFile,r.lstat=o.lstat,r.mkdir=o.mkdir,r.readdir=o.readdir,r.readlink=o.readlink,r.rename=o.rename,r.rmdir=o.rmdir,r.stat=o.stat,r.symlink=o.symlink,r.unlink=o.unlink,r.IS_WINDOWS="win32"===process.platform,r.exists=function(e){return i(this,void 0,void 0,(function*(){try{yield r.stat(e)}catch(e){if("ENOENT"===e.code)return!1;throw e}return!0}))},r.isDirectory=function(e,t=!1){return i(this,void 0,void 0,(function*(){return(t?yield r.stat(e):yield r.lstat(e)).isDirectory()}))},r.isRooted=function(e){if(!(e=function(e){if(e=e||"",r.IS_WINDOWS)return(e=e.replace(/\//g,"\\")).replace(/\\\\+/g,"\\");return e.replace(/\/\/+/g,"/")}(e)))throw new Error('isRooted() parameter "p" cannot be empty');return r.IS_WINDOWS?e.startsWith("\\")||/^[A-Z]:/i.test(e):e.startsWith("/")},r.mkdirP=function e(n,o=1e3,s=1){return i(this,void 0,void 0,(function*(){if(l.ok(n,"a path argument must be provided"),n=t.resolve(n),s>=o)return r.mkdir(n);try{return void(yield r.mkdir(n))}catch(i){switch(i.code){case"ENOENT":return yield e(t.dirname(n),o,s+1),void(yield r.mkdir(n));default:{let e;try{e=yield r.stat(n)}catch(e){throw i}if(!e.isDirectory())throw i}}}}))},r.tryGetExecutablePath=function(e,n){return i(this,void 0,void 0,(function*(){let o=void 0;try{o=yield r.stat(e)}catch(t){"ENOENT"!==t.code&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}if(o&&o.isFile())if(r.IS_WINDOWS){const r=t.extname(e).toUpperCase();if(n.some(e=>e.toUpperCase()===r))return e}else if(s(o))return e;const i=e;for(const a of n){e=i+a,o=void 0;try{o=yield r.stat(e)}catch(t){"ENOENT"!==t.code&&console.log(`Unexpected error attempting to determine if executable file exists '${e}': ${t}`)}if(o&&o.isFile()){if(r.IS_WINDOWS){try{const n=t.dirname(e),o=t.basename(e).toUpperCase();for(const i of yield r.readdir(n))if(o===i.toUpperCase()){e=t.join(n,i);break}}catch(t){console.log(`Unexpected error attempting to determine the actual case of the file '${e}': ${t}`)}return e}if(s(o))return e}}return""}))}})));m(Se);Se.chmod,Se.copyFile,Se.lstat,Se.mkdir,Se.readdir,Se.readlink,Se.rename,Se.rmdir,Se.stat,Se.symlink,Se.unlink,Se.IS_WINDOWS,Se.exists,Se.isDirectory,Se.isRooted,Se.mkdirP,Se.tryGetExecutablePath;var Ce=v((function(e,r){var n=g&&g.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o=u.promisify(a.exec);function i(e){return n(this,void 0,void 0,(function*(){if(Se.IS_WINDOWS){try{(yield Se.isDirectory(e,!0))?yield o(`rd /s /q "${e}"`):yield o(`del /f /a "${e}"`)}catch(e){if("ENOENT"!==e.code)throw e}try{yield Se.unlink(e)}catch(e){if("ENOENT"!==e.code)throw e}}else{let t=!1;try{t=yield Se.isDirectory(e)}catch(e){if("ENOENT"!==e.code)throw e;return}t?yield o(`rm -rf "${e}"`):yield Se.unlink(e)}}))}function s(e){return n(this,void 0,void 0,(function*(){yield Se.mkdirP(e)}))}function l(e,t,r){return n(this,void 0,void 0,(function*(){if((yield Se.lstat(e)).isSymbolicLink()){try{yield Se.lstat(t),yield Se.unlink(t)}catch(e){"EPERM"===e.code&&(yield Se.chmod(t,"0666"),yield Se.unlink(t))}const r=yield Se.readlink(e);yield Se.symlink(r,t,Se.IS_WINDOWS?"junction":null)}else(yield Se.exists(t))&&!r||(yield Se.copyFile(e,t))}))}r.cp=function(e,r,o={}){return n(this,void 0,void 0,(function*(){const{force:i,recursive:a}=function(e){const t=null==e.force||e.force,r=Boolean(e.recursive);return{force:t,recursive:r}}(o),u=(yield Se.exists(r))?yield Se.stat(r):null;if(u&&u.isFile()&&!i)return;const c=u&&u.isDirectory()?t.join(r,t.basename(e)):r;if(!(yield Se.exists(e)))throw new Error(`no such file or directory: ${e}`);if((yield Se.stat(e)).isDirectory()){if(!a)throw new Error(`Failed to copy. ${e} is a directory, but tried to copy without recursive flag.`);yield function e(t,r,o,i){return n(this,void 0,void 0,(function*(){if(o>=255)return;o++,yield s(r);const n=yield Se.readdir(t);for(const s of n){const n=`${t}/${s}`,a=`${r}/${s}`;(yield Se.lstat(n)).isDirectory()?yield e(n,a,o,i):yield l(n,a,i)}yield Se.chmod(r,(yield Se.stat(t)).mode)}))}(e,c,0,i)}else{if(""===t.relative(e,c))throw new Error(`'${c}' and '${e}' are the same file`);yield l(e,c,i)}}))},r.mv=function(e,r,o={}){return n(this,void 0,void 0,(function*(){if(yield Se.exists(r)){let n=!0;if((yield Se.isDirectory(r))&&(r=t.join(r,t.basename(e)),n=yield Se.exists(r)),n){if(null!=o.force&&!o.force)throw new Error("Destination already exists");yield i(r)}}yield s(t.dirname(r)),yield Se.rename(e,r)}))},r.rmRF=i,r.mkdirP=s,r.which=function e(r,o){return n(this,void 0,void 0,(function*(){if(!r)throw new Error("parameter 'tool' is required");if(o){if(!(yield e(r,!1)))throw Se.IS_WINDOWS?new Error(`Unable to locate executable file: ${r}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${r}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`)}try{const e=[];if(Se.IS_WINDOWS&&process.env.PATHEXT)for(const r of process.env.PATHEXT.split(t.delimiter))r&&e.push(r);if(Se.isRooted(r)){const t=yield Se.tryGetExecutablePath(r,e);return t||""}if(r.includes("/")||Se.IS_WINDOWS&&r.includes("\\"))return"";const n=[];if(process.env.PATH)for(const e of process.env.PATH.split(t.delimiter))e&&n.push(e);for(const o of n){const n=yield Se.tryGetExecutablePath(o+t.sep+r,e);if(n)return n}return""}catch(e){throw new Error(`which failed with message ${e.message}`)}}))}}));m(Ce);Ce.cp,Ce.mv,Ce.rmRF,Ce.mkdirP,Ce.which;var Ee=v((function(e,r){var n=g&&g.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const o="win32"===process.platform;class u extends s.EventEmitter{constructor(e,t,r){if(super(),!e)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=e,this.args=t||[],this.options=r||{}}_debug(e){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(e)}_getCommandString(e,t){const r=this._getSpawnFileName(),n=this._getSpawnArgs(e);let i=t?"":"[command]";if(o)if(this._isCmdFile()){i+=r;for(const e of n)i+=` ${e}`}else if(e.windowsVerbatimArguments){i+=`"${r}"`;for(const e of n)i+=` ${e}`}else{i+=this._windowsQuoteCmdArg(r);for(const e of n)i+=` ${this._windowsQuoteCmdArg(e)}`}else{i+=r;for(const e of n)i+=` ${e}`}return i}_processLineBuffer(e,t,r){try{let n=t+e.toString(),o=n.indexOf(i.EOL);for(;o>-1;){r(n.substring(0,o)),n=n.substring(o+i.EOL.length),o=n.indexOf(i.EOL)}t=n}catch(e){this._debug(`error processing line. Failed with error ${e}`)}}_getSpawnFileName(){return o&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(e){if(o&&this._isCmdFile()){let t=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(const r of this.args)t+=" ",t+=e.windowsVerbatimArguments?r:this._windowsQuoteCmdArg(r);return t+='"',[t]}return this.args}_endsWith(e,t){return e.endsWith(t)}_isCmdFile(){const e=this.toolPath.toUpperCase();return this._endsWith(e,".CMD")||this._endsWith(e,".BAT")}_windowsQuoteCmdArg(e){if(!this._isCmdFile())return this._uvQuoteCmdArg(e);if(!e)return'""';const t=[" ","\t","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let r=!1;for(const n of e)if(t.some(e=>e===n)){r=!0;break}if(!r)return e;let n='"',o=!0;for(let t=e.length;t>0;t--)n+=e[t-1],o&&"\\"===e[t-1]?n+="\\":'"'===e[t-1]?(o=!0,n+='"'):o=!1;return n+='"',n.split("").reverse().join("")}_uvQuoteCmdArg(e){if(!e)return'""';if(!e.includes(" ")&&!e.includes("\t")&&!e.includes('"'))return e;if(!e.includes('"')&&!e.includes("\\"))return`"${e}"`;let t='"',r=!0;for(let n=e.length;n>0;n--)t+=e[n-1],r&&"\\"===e[n-1]?t+="\\":'"'===e[n-1]?(r=!0,t+="\\"):r=!1;return t+='"',t.split("").reverse().join("")}_cloneExecOptions(e){const t={cwd:(e=e||{}).cwd||process.cwd(),env:e.env||process.env,silent:e.silent||!1,windowsVerbatimArguments:e.windowsVerbatimArguments||!1,failOnStdErr:e.failOnStdErr||!1,ignoreReturnCode:e.ignoreReturnCode||!1,delay:e.delay||1e4};return t.outStream=e.outStream||process.stdout,t.errStream=e.errStream||process.stderr,t}_getSpawnOptions(e,t){e=e||{};const r={};return r.cwd=e.cwd,r.env=e.env,r.windowsVerbatimArguments=e.windowsVerbatimArguments||this._isCmdFile(),e.windowsVerbatimArguments&&(r.argv0=`"${t}"`),r}exec(){return n(this,void 0,void 0,(function*(){return!Se.isRooted(this.toolPath)&&(this.toolPath.includes("/")||o&&this.toolPath.includes("\\"))&&(this.toolPath=t.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield Ce.which(this.toolPath,!0),new Promise((e,t)=>{this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(const e of this.args)this._debug(`   ${e}`);const r=this._cloneExecOptions(this.options);!r.silent&&r.outStream&&r.outStream.write(this._getCommandString(r)+i.EOL);const n=new l(r,this.toolPath);n.on("debug",e=>{this._debug(e)});const o=this._getSpawnFileName(),s=a.spawn(o,this._getSpawnArgs(r),this._getSpawnOptions(this.options,o));s.stdout&&s.stdout.on("data",e=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(e),!r.silent&&r.outStream&&r.outStream.write(e),this._processLineBuffer(e,"",e=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(e)})});s.stderr&&s.stderr.on("data",e=>{if(n.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(e),!r.silent&&r.errStream&&r.outStream){(r.failOnStdErr?r.errStream:r.outStream).write(e)}this._processLineBuffer(e,"",e=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(e)})}),s.on("error",e=>{n.processError=e.message,n.processExited=!0,n.processClosed=!0,n.CheckComplete()}),s.on("exit",e=>{n.processExitCode=e,n.processExited=!0,this._debug(`Exit code ${e} received from tool '${this.toolPath}'`),n.CheckComplete()}),s.on("close",e=>{n.processExitCode=e,n.processExited=!0,n.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),n.CheckComplete()}),n.on("done",(r,n)=>{"".length>0&&this.emit("stdline",""),"".length>0&&this.emit("errline",""),s.removeAllListeners(),r?t(r):e(n)})})}))}}r.ToolRunner=u,r.argStringToArray=function(e){const t=[];let r=!1,n=!1,o="";function i(e){n&&'"'!==e&&(o+="\\"),o+=e,n=!1}for(let s=0;s<e.length;s++){const a=e.charAt(s);'"'!==a?"\\"===a&&n?i(a):"\\"===a&&r?n=!0:" "!==a||r?i(a):o.length>0&&(t.push(o),o=""):n?i(a):r=!r}return o.length>0&&t.push(o.trim()),t};class l extends s.EventEmitter{constructor(e,t){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!t)throw new Error("toolPath must not be empty");this.options=e,this.toolPath=t,e.delay&&(this.delay=e.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=setTimeout(l.HandleTimeout,this.delay,this)))}_debug(e){this.emit("debug",e)}_setResult(){let e;this.processExited&&(this.processError?e=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):0===this.processExitCode||this.options.ignoreReturnCode?this.processStderr&&this.options.failOnStdErr&&(e=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`)):e=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`)),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",e,this.processExitCode)}static HandleTimeout(e){if(!e.done){if(!e.processClosed&&e.processExited){const t=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(t)}e._setResult()}}}}));m(Ee);Ee.ToolRunner,Ee.argStringToArray;var be=v((function(e,t){var r=g&&g.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.exec=function(e,t,n){return r(this,void 0,void 0,(function*(){const r=Ee.argStringToArray(e);if(0===r.length)throw new Error("Parameter 'commandLine' cannot be null or empty.");const o=r[0];return t=r.slice(1).concat(t||[]),new Ee.ToolRunner(o,t,n).exec()}))}})),Ae=m(be);be.exec;(async function(){const e={dockerfile:we.getInput("dockerfile",{required:!1})||"Dockerfile",composefile:we.getInput("composefile",{required:!1})||void 0,context:we.getInput("context",{required:!1})||".",tag:we.getInput("tag",{required:!1})||"docker-image:latest",tags:we.getInput("tags",{required:!1})||void 0,registry:we.getInput("registry",{required:!1})||void 0,username:we.getInput("username",{required:!1})||void 0,password:we.getInput("password",{required:!1})||void 0};await async function(e){let t=!1;e.registry&&e.username&&e.password?(we.startGroup("Log into private registry"),await Ae.exec("docker",["login","--username",e.username,"--password",e.password,e.registry]),we.endGroup(),t=!0):console.log("Build without logging into private registry");if(e.composefile)r.existsSync(e.composefile)||(we.setFailed(`The provided docker-compose file does not exist: ${e.composefile}`),process.exit(1)),we.startGroup("Build docker-compose file"),await Ae.exec("docker-compose",["-f",e.composefile,"build"]),we.endGroup();else{we.startGroup("Build Dockerfile file"),r.existsSync(e.dockerfile)||(we.setFailed(`The provided dockerfile does not exist: ${e.dockerfile}`),process.exit(1));const n=function(e,t){if(!e.tags)return t?["-t",`${e.registry}/${e.tag}`]:["-t",e.tag];const r=e.tags.split("\n").map(r=>t?`${e.registry}/${r}`:r);let n=[];for(const e of r)n.push("-t"),n.push(e);return n}(e,t);await Ae.exec("docker",["image","build",...n,"-f",e.dockerfile,e.context]),we.endGroup()}}(e)})().catch(e=>we.setFailed(String(e)));
//# sourceMappingURL=index.js.map
